(function(b){function I(a,d,e){e=p(d,e);return this.G("click.pjax",a,function(a){var c=e;c.a||(c=b.extend({},e),c.a=b(this).f("data-pjax"));A(a,c)})}function A(a,d,e){e=p(d,e);var c=a.currentTarget;d=b(c);if("A"!==c.tagName.toUpperCase())throw"$.fn.pjax or $.pjax.click requires an anchor element";1<a.which||a.metaKey||a.ctrlKey||a.shiftKey||a.altKey||location.protocol!==c.protocol||location.hostname!==c.hostname||-1<c.href.indexOf("#")&&c.href.replace(/#.*/,"")==location.href.replace(/#.*/,"")||a.o()||
(c={url:c.href,a:d.f("data-pjax"),target:c},e=b.extend({},c,e),c=b.Event("pjax:click"),d.i(c,[e]),c.o()||(g(e),a.preventDefault(),d.i("pjax:clicked",[e])))}function J(a,d,e){e=p(d,e);d=a.currentTarget;var c=b(d);if("FORM"!==d.tagName.toUpperCase())throw"$.pjax.submit requires a form element";var f={type:(c.f("method")||"GET").toUpperCase(),url:c.f("action"),a:c.f("data-pjax"),target:d};if("GET"!==f.type&&void 0!==window.FormData)f.data=new FormData(d),f.T=!1,f.contentType=!1;else{if(c.find(":file").length)return;
f.data=c.U()}g(b.extend({},f,e));a.preventDefault()}function g(a){function d(c,d,e){e||(e={});e.relatedTarget=a.target;c=b.Event(c,e);f.i(c,d);return!c.o()}a=b.extend(!0,{},b.N,g.h,a);b.C(a.url)&&(a.url=a.url());var e=r(a.url).hash,c=b.type(a.a);if("string"!==c)throw"expected string value for 'container' option; got "+c;var f=a.context=b(a.a);if(!f.length)throw"the container selector '"+a.a+"' did not match anything";a.data||(a.data={});b.isArray(a.data)?a.data.push({name:"_pjax",value:a.a}):a.data.K=
a.a;var l;a.O=function(b,c){"GET"!==c.type&&(c.timeout=0);b.setRequestHeader("X-PJAX","true");b.setRequestHeader("X-PJAX-Container",a.a);if(!d("pjax:beforeSend",[b,c]))return!1;0<c.timeout&&(l=setTimeout(function(){d("pjax:timeout",[b,a])&&b.abort("timeout")},c.timeout),c.timeout=0);var f=r(c.url);e&&(f.hash=e);a.w=B(f)};a.complete=function(b,c){l&&clearTimeout(l);d("pjax:complete",[b,c,a]);d("pjax:end",[b,a])};a.error=function(b,c,e){var f=C("",b,a);b=d("pjax:error",[b,c,e,a]);"GET"==a.type&&"abort"!==
c&&b&&t(f.url)};a.V=function(c,l,m){var k=g.state,q="function"===typeof b.b.h.version?b.b.h.version():b.b.h.version,n=m.getResponseHeader("X-PJAX-Version"),h=C(c,m,a),p=r(h.url);e&&(p.hash=e,h.url=p.href);if(q&&n&&q!==n)t(h.url);else if(h.c){g.state={id:a.id||(new Date).getTime(),url:h.url,title:h.title,a:a.a,g:a.g,timeout:a.timeout};(a.push||a.replace)&&window.history.replaceState(g.state,h.title,h.url);if(b.contains(f,document.activeElement))try{document.activeElement.blur()}catch(Q){}h.title&&
(document.title=h.title);d("pjax:beforeReplace",[h.c,a],{state:g.state,H:k});f.B(h.c);(k=f.find("input[autofocus], textarea[autofocus]").D()[0])&&document.activeElement!==k&&k.focus();K(h.scripts);h=a.scrollTo;e&&(k=decodeURIComponent(e.slice(1)),k=document.getElementById(k)||document.getElementsByName(k)[0])&&(h=b(k).offset().top);"number"==typeof h&&b(window).scrollTop(h);d("pjax:success",[c,l,m,a])}else t(h.url)};g.state||(g.state={id:(new Date).getTime(),url:window.location.href,title:document.title,
a:a.a,g:a.g,timeout:a.timeout},window.history.replaceState(g.state,document.title));D(g.m);g.options=a;c=g.m=b.M(a);0<c.readyState&&(a.push&&!a.replace&&(L(g.state.id,[a.a,E(f)]),window.history.pushState(null,"",a.w)),d("pjax:start",[c,a]),d("pjax:send",[c,a]));return g.m}function M(a,d){return g(b.extend({url:window.location.href,push:!1,replace:!0,scrollTo:!1},p(a,d)))}function t(a){window.history.replaceState(null,"",g.state.url);window.location.replace(a)}function F(a){u||D(g.m);var d=g.state,
e=a.state;if(e&&e.a){if(u&&N==e.url)return;if(d){if(d.id===e.id)return;var c=d.id<e.id?"forward":"back"}var f=n[e.id]||[],l=f[0]||e.a;a=b(l);f=f[1];if(a.length){if(d){var k=c,q=d.id,m=[l,E(a)];n[q]=m;"forward"===k?(k=v,m=w):(k=w,m=v);k.push(q);(q=m.pop())&&delete n[q];x(k,g.h.s)}c=b.Event("pjax:popstate",{state:e,direction:c});a.i(c);c={id:e.id,url:e.url,a:l,push:!1,g:e.g,timeout:e.timeout,scrollTo:!1};f?(a.i("pjax:start",[null,c]),g.state=e,e.title&&(document.title=e.title),d=b.Event("pjax:beforeReplace",
{state:e,H:d}),a.i(d,[f,c]),a.B(f),a.i("pjax:end",[null,c])):g(c);a[0].offsetHeight}else t(location.href)}u=!1}function O(a){var d=b.C(a.url)?a.url():a.url,e=a.type?a.type.toUpperCase():"GET",c=b("<form>",{method:"GET"===e?"GET":"POST",action:d,style:"display:none"});"GET"!==e&&"POST"!==e&&c.append(b("<input>",{type:"hidden",name:"_method",value:e.toLowerCase()}));a=a.data;if("string"===typeof a)b.l(a.split("&"),function(a,d){var e=d.split("=");c.append(b("<input>",{type:"hidden",name:e[0],value:e[1]}))});
else if(b.isArray(a))b.l(a,function(a,d){c.append(b("<input>",{type:"hidden",name:d.name,value:d.value}))});else if("object"===typeof a)for(var f in a)c.append(b("<input>",{type:"hidden",name:f,value:a[f]}));b(document.body).append(c);c.submit()}function D(a){a&&4>a.readyState&&(a.onreadystatechange=b.j,a.abort())}function E(a){a=a.clone();a.find("script").l(function(){this.src||b.J(this,"globalEval",!1)});return a.c()}function B(a){a.search=a.search.replace(/([?&])(_pjax|_)=[^&]*/g,"").replace(/^&/,
"");return a.href.replace(/\?($|#)/,"$1")}function r(a){var b=document.createElement("a");b.href=a;return b}function p(a,d){return a&&d?(d=b.extend({},d),d.a=a,d):b.R(a)?a:{a:a}}function y(a,b){return a.filter(b).add(a.find(b))}function C(a,d,e){var c={},f=/<html/i.test(a);d=d.getResponseHeader("X-PJAX-URL");c.url=d?B(r(d)):e.w;f?(d=b(b.u(a.match(/<body[^>]*>([\s\S.]*)<\/body>/i)[0],document,!0)),a=a.match(/<head[^>]*>([\s\S.]*)<\/head>/i),a=null!=a?b(b.u(a[0],document,!0)):d):a=d=b(b.u(a,document,
!0));if(0===d.length)return c;c.title=y(a,"title").D().text();e.g?(f=d,"body"!==e.g&&(f=y(f,e.g).first()),f.length&&(c.c="body"===e.g?f:f.c(),c.title||(c.title=f.f("title")||f.data("title")))):f||(c.c=d);c.c&&(c.c=c.c.F(function(){return b(this).is("title")}),c.c.find("title").remove(),c.scripts=y(c.c,"script[src]").remove(),c.c=c.c.F(c.scripts));c.title&&(c.title=b.trim(c.title));return c}function K(a){if(a){var d=b("script[src]");a.l(function(){var a=this.src;if(!d.filter(function(){return this.src===
a}).length){var c=document.createElement("script"),f=b(this).f("type");f&&(c.type=f);c.src=b(this).f("src");document.head.appendChild(c)}})}}function L(a,b){n[a]=b;v.push(a);x(w,0);x(v,g.h.s)}function x(a,b){for(;a.length>b;)delete n[a.shift()]}function P(){return b("meta").filter(function(){var a=b(this).f("http-equiv");return a&&"X-PJAX-VERSION"===a.toUpperCase()}).f("content")}function G(){b.A.b=I;b.b=g;b.b.enable=b.j;b.b.disable=H;b.b.click=A;b.b.submit=J;b.b.reload=M;b.b.h={timeout:650,push:!0,
replace:!1,type:"GET",dataType:"html",scrollTo:0,s:20,version:P};b(window).G("popstate.pjax",F)}function H(){b.A.b=function(){return this};b.b=O;b.b.enable=G;b.b.disable=b.j;b.b.click=b.j;b.b.submit=b.j;b.b.reload=function(){window.location.reload()};b(window).S("popstate.pjax",F)}var u=!0,N=window.location.href,z=window.history.state;z&&z.a&&(g.state=z);"state"in window.history&&(u=!1);var n={},w=[],v=[];b.event.v&&0>b.P("state",b.event.v)?b.event.v.push("state"):"state"in b.Event.prototype||b.event.L("state");
b.I.b=window.history&&window.history.pushState&&window.history.replaceState&&!navigator.userAgent.match(/((iPod|iPhone|iPad).+\bOS\s+[1-4]\D|WebApps\/.+CFNetwork)/);b.I.b?G():H()})(jQuery);