jQuery(function(d){var n=function(){var k=("https:"==location.protocol?"https:":"http:")+"//formoid.net/api/push",b=function(){var a=(/MSIE (\d+)\./.exec(navigator.userAgent)||[0,0])[1];if(8==a||9==a&&"file:"!=location.protocol)return function(a,c){var g=new XDomainRequest,b=d.Deferred();g.open(c.type,a);g.onload=function(){b.resolve(this.responseText)};g.onerror=function(){b.reject()};g.send(c.data);return b};d.support.cors=!0;return d.ajax}(),e=function(a,b){a="__"+a+"__";return b.length?(this[a]=
b[0],this):this[a]},h=function(a,b,c){d.each(c,function(d,c){a[c]=function(){return b[c].apply(b,arguments)}});return a},f=function(a){a=a||{};this.__email__=a.email||"";this.__title__=a.title||"";this.__data__=a.data||[]};f.prototype.email=function(a){return e.call(this,"email",arguments)};f.prototype.title=function(a){return e.call(this,"title",arguments)};f.prototype.data=function(a){return e.call(this,"data",arguments)};f.prototype.send=function(a,e){var c=h(d.Deferred(),this,["email","title",
"data","send"]);if(e&&(e.call(this,c),"pending"!=c.state()))return c;b(k,{type:"POST",data:JSON.stringify({email:this.__email__,form:{title:this.__title__,data:arguments.length?a:this.__data__}})}).done(function(a){try{var b=JSON.parse(a);b.error?c.reject(b.error):c.resolve(b.response)}catch(p){c.reject("Incorrect server response.")}}).fail(function(){var a="Failed to query the server. ";a="onLine"in navigator&&!navigator.onLine?a+"No connection to the Internet.":a+"Check the connection and try again.";
c.reject(a)});return c};return{Form:function(a){return new f(a)}}}();d('[data-form-type="formoid"]').each(function(){var k,b=d(this),e=b.is("form")?b:b.find("form"),h=b.find("[data-form-alert]"),f=b.is("[data-form-title]")?b:b.find("[data-form-title]"),a=b.find('[type="submit"]'),m=h.html();a.click(function(){e.addClass("form-active")});e.submit(function(c){c.preventDefault();e.addClass("form-active");if(!a.hasClass("btn-loading")){var g=!0,l=[];k=k||n.Form({email:b.find("[data-form-email]").val(),
title:f.attr("data-form-title")||f.text()});h.html("");b.find("[data-form-field]").each(function(){if(this.checkValidity)var a=this.checkValidity();else{a=!0;var b=d(this).val(),c=d(this).attr("type");b?a=!("email"===c&&!/^([^@]+?)@(([a-z0-9]-*)*[a-z0-9]+\.)+([a-z0-9]+)$/i.test(b)):d(this).attr("required")&&(a=!1);d(this)[(a?"remove":"add")+"Class"]("form-invalid")}a||(g=!1);l.push([d(this).attr("data-form-field")||d(this).attr("name"),d(this).val()])});g&&(a.addClass("btn-loading").prop("disabled",
!0),k.send(l).done(function(a){e.removeClass("form-active");b.find("[data-form-field]").val("");h.removeAttr("hidden");h.append(d('<div class="alert alert-form alert-success text-xs-center"/>').text(m||a))}).fail(function(a){h.append(d('<div class="alert alert-form alert-danger text-xs-center"/>').text(a))}).always(function(){a.removeClass("btn-loading").prop("disabled",!1)}))}})})});